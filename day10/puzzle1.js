const AsteroidsMap = require('./utils').AsteroidsMap;

const input = [
    '..#..###....#####....###........#',
    '.##.##...#.#.......#......##....#',
    '#..#..##.#..###...##....#......##',
    '..####...#..##...####.#.......#.#',
    '...#.#.....##...#.####.#.###.#..#',
    '#..#..##.#.#.####.#.###.#.##.....',
    '#.##...##.....##.#......#.....##.',
    '.#..##.##.#..#....#...#...#...##.',
    '.#..#.....###.#..##.###.##.......',
    '.##...#..#####.#.#......####.....',
    '..##.#.#.#.###..#...#.#..##.#....',
    '.....#....#....##.####....#......',
    '.#..##.#.........#..#......###..#',
    '#.##....#.#..#.#....#.###...#....',
    '.##...##..#.#.#...###..#.#.#..###',
    '.#..##..##...##...#.#.#...#..#.#.',
    '.#..#..##.##...###.##.#......#...',
    '...#.....###.....#....#..#....#..',
    '.#...###..#......#.##.#...#.####.',
    '....#.##...##.#...#........#.#...',
    '..#.##....#..#.......##.##.....#.',
    '.#.#....###.#.#.#.#.#............',
    '#....####.##....#..###.##.#.#..#.',
    '......##....#.#.#...#...#..#.....',
    '...#.#..####.##.#.........###..##',
    '.......#....#.##.......#.#.###...',
    '...#..#.#.........#...###......#.',
    '.#.##.#.#.#.#........#.#.##..#...',
    '.......#.##.#...........#..#.#...',
    '.####....##..#..##.#.##.##..##...',
    '.#.#..###.#..#...#....#.###.#..#.',
    '............#...#...#.......#.#..',
    '.........###.#.....#..##..#.##...',
]; // 27,19 => 314

// const input = [
//     '.#..#',
//     '.....',
//     '#####',
//     '....#',
//     '...##',
// ]; // 5,8 => 33
// const input = [
//     '......#.#.',
//     '#..#.#....',
//     '..#######.',
//     '.#.#.###..',
//     '.#..#.....',
//     '..#....#.#',
//     '#..#....#.',
//     '.##.#..###',
//     '##...#..#.',
//     '.#....####',
// ]; // 5,8 => 33
// const input = [
//     '#.#...#.#.',
//     '.###....#.',
//     '.#....#...',
//     '##.#.#.#.#',
//     '....#.#.#.',
//     '.##..###.#',
//     '..#...##..',
//     '..##....##',
//     '......#...',
//     '.####.###.',
// ]; // 1,2 => 35
// const input = [
//     '.#..#..###',
//     '####.###.#',
//     '....###.#.',
//     '..###.##.#',
//     '##.##.#.#.',
//     '....###..#',
//     '..#.#..#.#',
//     '#..#.#.###',
//     '.##...##.#',
//     '.....#.#..',
// ]; // 6,3 => 41
// const input = [
//     '.#..##.###...#######',
//     '##.############..##.',
//     '.#.######.########.#',
//     '.###.#######.####.#.',
//     '#####.##.#.##.###.##',
//     '..#####..#.#########',
//     '####################',
//     '#.####....###.#.#.##',
//     '##.#################',
//     '#####.##.###..####..',
//     '..######..##.#######',
//     '####.##.####...##..#',
//     '.#####..#.######.###',
//     '##...#.##########...',
//     '#.##########.#######',
//     '.####.#.###.###.#.##',
//     '....##.##.###..#####',
//     '.#.#.###########.###',
//     '#.#.#.#####.####.###',
//     '###.##.####.##.#..##',
// ]; // 11,13 => 210

let Rta;

const mapWidth = input[0].length;
const asteroidsMapString = input.join('');
console.log(mapWidth);
input.forEach((r) => console.log(r));

let am = new AsteroidsMap(asteroidsMapString, mapWidth);
console.log('Total asteroids', am.asteroids.length);

am.calculateAll();

for (let a of am.asteroids) {
    console.log('Asteroid', a.x, a.y, 'sees', a.visibleAsteroids.length);
}

let bestAsteroid = am.asteroids.slice(0).sort((a, b) => b.visibleAsteroids.length - a.visibleAsteroids.length)[0];
console.log('bestAsteroid', bestAsteroid.x, bestAsteroid.y);

Rta = bestAsteroid.visibleAsteroids.length;
console.log('Rta', Rta);

// Rta 314
